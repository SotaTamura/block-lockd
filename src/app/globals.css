@import "tailwindcss";

@font-face {
    font-family: "Makinas";
    src: url("../fonts/Makinas-4-Square.woff2");
}

@layer components {
    * {
        padding: 0;
        margin: 0;
        box-sizing: border-box;
        user-select: none;
        -moz-user-select: none;
        -webkit-user-select: none;
        color: #fff;
    }
    img {
        pointer-events: none;
        image-rendering: pixelated;
    }
    .btn,
    .miniBtn,
    img {
        -webkit-touch-callout: none;
        touch-action: none;
    }
    .stageWrapper,
    .stage,
    .hintText {
        touch-action: pan-y;
    }
    html,
    body {
        font-family: "Makinas", sans-serif;
    }
    body {
        position: relative;
        text-align: center;
        width: 100svw;
        height: 100svh;
        background: radial-gradient(#aaa, #555);
    }
    .loadingTxt {
        line-height: 100svh;
        color: #f00;
    }
    .stageSelectScreen {
        display: grid;
        grid-template-columns: 1fr 1fr;
        grid-template-rows: 12svmin 18svmin 1fr;
        grid-template-areas:
            "back ...."
            "txt txt"
            "stage stage";
    }
    .back {
        width: 18svmin;
        height: 12svmin;
        grid-area: back;
    }
    .selectStageText {
        grid-area: txt;
    }
    .stageWrapperContainer {
        padding: 50px 0;
        grid-area: stage;
        overflow: scroll;
        background-color: #333;
        text-align: center;
    }
    .stageWrapper {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
    }
    .btn {
        background: linear-gradient(#ddd, #999);
        border: #333 solid 5px;
        border-top: #777 solid 5px;
        border-left: #777 solid 5px;
        background-position: center;
        position: relative;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    .arrow.pressed,
    .btn:not(.arrow):not(.completedBtn, .dangerBtn):active {
        background: linear-gradient(#555, #999);
        border: #777 solid 5px;
        border-top: #333 solid 5px;
        border-left: #333 solid 5px;
    }
    .btn svg {
        width: 70%;
        height: 70%;
        object-fit: contain;
    }
    .btn div {
        position: absolute;
        color: #4b4b4b;
        font-size: 70%;
        top: 10%;
        left: 25%;
        right: 25%;
        overflow: visible;
    }
    .completedBtn {
        background: linear-gradient(#0d0, #090);
        border: #030 solid 5px;
        border-top: #070 solid 5px;
        border-left: #070 solid 5px;
    }
    .completedBtn:active {
        background: linear-gradient(#050, #090);
        border: #070 solid 5px;
        border-top: #030 solid 5px;
        border-left: #030 solid 5px;
    }
    .completedBtn div {
        color: #fff;
    }
    .dangerBtn {
        background: linear-gradient(#d00, #900);
        border: #300 solid 5px;
        border-top: #700 solid 5px;
        border-left: #700 solid 5px;
    }
    .dangerBtn:active {
        background: linear-gradient(#500, #900);
        border: #700 solid 5px;
        border-top: #300 solid 5px;
        border-left: #300 solid 5px;
    }
    .miniBtn {
        background-color: #aaa;
        color: #333;
        border: #333 solid 2px;
        cursor: pointer;
        text-align: center;
    }
    .loginBtn {
        position: fixed;
        top: 10px;
        right: 10px;
        font-size: 30px;
    }
    .stage {
        width: 20svmin;
        height: 14svmin;
        line-height: 11svmin;
        font-size: 11svmin;
        margin: 1%;
    }
    .stageNum {
        grid-area: num;
        text-align: center;
        margin: auto;
        font-size: 8svmin;
        overflow: hidden;
    }
    .gameScreen {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        grid-template-rows: 60px calc(100svh - 280px) 40px 180px;
        grid-template-areas:
            "num menu restart"
            "main main main"
            "guide guide guide"
            "btn btn btn";
        height: 100%;
    }
    .editorScreen {
        display: grid;
        grid-template-columns: 1fr;
        grid-template-rows: 60px calc(100svh - 280px) 110px 110px;
        grid-template-areas:
            "header"
            "main"
            "objs"
            "tools";
        height: 100%;
    }
    .testScreen {
        display: grid;
        grid-template-columns: 1fr;
        grid-template-rows: 60px calc(100svh - 280px) 220px;
        grid-template-areas:
            "header"
            "main"
            "btn";
        height: 100%;
    }
    .objs {
        display: flex;
        grid-area: objs;
        background-color: #999;
        border-top: #777 solid 8px;
        border-bottom: #777 solid 8px;
        height: 110px;
        align-items: center;
        overflow-x: scroll;
        touch-action: pan-x;
        font-size: 5svmin;
    }
    .tools {
        display: flex;
        grid-area: tools;
        background-color: #ddd;
        border-top: #bbb solid 8px;
        border-bottom: #bbb solid 8px;
        height: 110px;
        align-items: center;
        overflow-x: scroll;
        touch-action: pan-x;
    }
    .objImg,
    .toolImg {
        touch-action: pan-x;
        margin: 5px;
        width: 55px;
        height: 55px;
        pointer-events: auto;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    .objImg.selected {
        border: #0f0 solid 2px;
    }
    .toolImg.selected {
        border: #00f solid 2px;
    }
    #stage-editor-main {
        width: 100%;
        height: 100%;
    }
    input[type="checkbox"] {
        width: 20px;
        height: 20px;
        margin: 10px;
    }
    .guides {
        grid-area: guide;
        font-size: 20px;
        text-align: left;
        display: flex;
    }
    .guide {
        height: 35px;
        margin: 0 10px;
        padding: 0 5px;
    }
    #cnvWrapper {
        grid-area: main;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    #main {
        aspect-ratio: 1 / 1;
        width: 100%;
        height: 100%;
        object-fit: contain;
    }
    .loadingStage {
        grid-area: main;
    }
    .restart {
        grid-area: restart;
        width: 33svw;
        max-width: 90px;
        aspect-ratio: 1.5;
        margin: auto;
    }
    .menu {
        grid-area: menu;
        width: 33svw;
        max-width: 90px;
        aspect-ratio: 1.5;
        margin: auto;
    }
    .controlBtns {
        grid-area: btn;
        margin: 0 auto;
        width: 100%;
        max-width: 270px;
        aspect-ratio: 1.5;
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        grid-template-rows: 1fr 1fr 1fr;
        grid-template-areas:
            ". u ."
            "l . r"
            ". d .";
    }
    .arrow {
        aspect-ratio: 1.5;
    }
    .u {
        grid-area: u;
    }
    .l {
        grid-area: l;
    }
    .d {
        grid-area: d;
    }
    .r {
        grid-area: r;
    }
    .popup {
        z-index: 10;
        display: grid;
        grid-template-columns: 1fr;
        grid-template-rows: 1fr 3fr;
        grid-template-areas:
            "title"
            "detail";
        background: rgba(48, 48, 48, 0.8);
        border: 20px double #eee;
        position: absolute;
        inset: 10%;
        text-align: center;
    }
    .popupTitle {
        font-size: 10svmin;
        z-index: 11;
        margin: 10svmin;
        grid-area: title;
    }
    .popup.hint::before {
        content: "Ã—";
        position: absolute;
        top: 5px;
        right: 5px;
        font-size: 30px;
        cursor: pointer;
        color: white;
        padding: 0 5px;
    }
    .hintText {
        z-index: 11;
        grid-area: detail;
        width: 100%;
        font-size: 6svmin;
        white-space: pre-line;
        overflow: scroll;
    }
    .next {
        z-index: 11;
        grid-area: detail;
        width: 30svmin;
        height: 20svmin;
        margin: auto;
    }
    .editor-layout {
        display: grid;
        grid-template-columns: 1fr 1fr;
        grid-template-rows: 12svmin 18svmin 15svmin 1fr;
        grid-template-areas:
            "header header"
            "title title"
            "new-link new-link"
            "list list";
    }
    .unselected-tab {
        background-color: #333;
        color: white;
        border: white solid 2px;
        border-bottom: none;
    }

    @media screen and (min-aspect-ratio: 1/1) {
        .gameScreen {
            grid-template-columns: 140px calc(100svw - 280px) 70px 70px;
            grid-template-rows: 22svh 30svh 48svh;
            grid-template-areas:
                "num  main menu restart"
                ".... main guide guide"
                "btn  main .... ....";
        }
        .menu,
        .restart,
        .arrow {
            height: 22svh;
            max-height: 105px;
            width: initial;
            aspect-ratio: 0.66;
            margin: auto;
        }
        .controlBtns {
            display: grid;
            grid-template-columns: 70px 70px calc(100svw - 280px) 140px;
            grid-template-rows: 24svh 24svh;
            grid-template-areas:
                "l r . u"
                "l r . d";
        }
        .guides {
            display: block;
        }
        .editorScreen {
            grid-template-columns: 140px calc(100svw - 280px) 140px;
            grid-template-rows: 60px calc(100svh - 60px);
            grid-template-areas:
                "header header header"
                "objs main tools";
        }
        .testScreen {
            grid-template-columns: 140px calc(100svw - 280px) 140px;
            grid-template-rows: 60px 1fr 1fr;
            grid-template-areas:
                "header header header"
                ".... main ...."
                "btn  main ....";
        }
        .objs {
            flex-direction: column;
            border-left: #777 solid 8px;
            border-right: #777 solid 8px;
            border-top: none;
            border-bottom: none;
            width: 140px;
            height: calc(100svh - 60px);
            overflow-y: scroll;
            overflow-x: initial;
            touch-action: pan-y;
        }
        .tools {
            flex-direction: column;
            border-left: #bbb solid 8px;
            border-right: #bbb solid 8px;
            border-top: none;
            border-bottom: none;
            width: 140px;
            height: calc(100svh - 60px);
            overflow-y: scroll;
            overflow-x: initial;
            touch-action: pan-y;
        }
    }
}
